(()=>{var e={};e.id=561,e.ids=[561],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4675:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>o.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>l});var n=a(482),s=a(9108),r=a(2563),o=a.n(r),c=a(8300),i={};for(let e in c)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>c[e]);a.d(t,i);let l=["",{children:["network",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,3534)),"/Users/moltplush/.openclaw/workspace/s4s-app/app/network/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,2917)),"/Users/moltplush/.openclaw/workspace/s4s-app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,9361,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/moltplush/.openclaw/workspace/s4s-app/app/network/page.tsx"],u="/network/page",m={require:a,loadChunk:()=>Promise.resolve()},p=new n.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/network/page",pathname:"/network",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},3341:()=>{},8017:(e,t,a)=>{Promise.resolve().then(a.bind(a,253))},8606:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,2583,23)),Promise.resolve().then(a.t.bind(a,6840,23)),Promise.resolve().then(a.t.bind(a,8771,23)),Promise.resolve().then(a.t.bind(a,3225,23)),Promise.resolve().then(a.t.bind(a,9295,23)),Promise.resolve().then(a.t.bind(a,3982,23))},253:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p});var n=a(5344),s=a(3729),r=a(6506);let o="models";function c(){return new Promise((e,t)=>{let a=indexedDB.open("s4s-network",1);a.onerror=()=>t(a.error),a.onsuccess=()=>e(a.result),a.onupgradeneeded=e=>{let t=e.target.result;t.objectStoreNames.contains(o)||t.createObjectStore(o,{keyPath:"username"})}})}async function i(){let e=await c();return new Promise((t,a)=>{let n=e.transaction(o,"readonly").objectStore(o).getAll();n.onerror=()=>a(n.error),n.onsuccess=()=>t(n.result||[])})}async function l(e){let t=await c();return new Promise((a,n)=>{let s=t.transaction(o,"readwrite").objectStore(o).put(e);s.onerror=()=>n(s.error),s.onsuccess=()=>a()})}async function d(e){let t=await c();return new Promise((a,n)=>{let s=t.transaction(o,"readwrite").objectStore(o).delete(e);s.onerror=()=>n(s.error),s.onsuccess=()=>a()})}async function u(){if(!((await i()).length>0))for(let e of[{username:"milliexhart",displayName:"Millie Hart",accountId:"acct_ebca85077e0a4b7da04cf14176466411",inRotation:!0,addedAt:new Date().toISOString()},{username:"zoepriceee",displayName:"Zoe Price",accountId:"acct_f05bf7874c974a5d875a1ef01c5bbc3b",inRotation:!0,addedAt:new Date().toISOString()},{username:"novaleighh",displayName:"Nova Leigh",accountId:"acct_9ee32f0bac4e4e8394a09f2c9fa2fbb7",inRotation:!0,addedAt:new Date().toISOString()},{username:"lucymonroee",displayName:"Lucy Monroe",accountId:"acct_0653d6e6c3984bea8d3adc84cc616c7c",inRotation:!0,addedAt:new Date().toISOString()},{username:"chloecookk",displayName:"Chloe Cook",accountId:"acct_6bb6d77ac2c741ecb54d865237bb04f4",inRotation:!0,addedAt:new Date().toISOString()},{username:"jackiesmithh",displayName:"Jackie Smith",accountId:"acct_bd6a75d6943141589cf5e43586653258",inRotation:!0,addedAt:new Date().toISOString()},{username:"brookeewest",displayName:"Brooke West",accountId:"acct_749c75e13d7e4685813f2a2867ce614d",inRotation:!0,addedAt:new Date().toISOString()},{username:"ayaaann",displayName:"Aya",accountId:"acct_b0b0698a614643c5932cfccd23f7c430",inRotation:!0,addedAt:new Date().toISOString()},{username:"chloeecavalli",displayName:"Chloe Cavalli",accountId:"acct_b5e739f9f40a4da99b2f5ca559168012",inRotation:!0,addedAt:new Date().toISOString()},{username:"sadieeblake",displayName:"Sadie Blake",accountId:"acct_cfb853d0ba714aeaa9a89e3026ec6190",inRotation:!0,addedAt:new Date().toISOString()},{username:"lolasinclairr",displayName:"Lola Sinclair",accountId:"acct_bde8d615937548f18c4e54b7cedf8c1d",inRotation:!0,addedAt:new Date().toISOString()},{username:"maddieharperr",displayName:"Maddie Harper",accountId:"acct_a50799a789a6422c8389d7d055fcbd1a",inRotation:!0,addedAt:new Date().toISOString()},{username:"zoeemonroe",displayName:"Zoe Monroe",accountId:"acct_fbd172e2681f4dfbb6026ce806ecaa28",inRotation:!0,addedAt:new Date().toISOString()},{username:"biancaawoods",displayName:"Bianca Woods",accountId:"acct_54e3119e77da4429b6537f7dd2883a05",inRotation:!0,addedAt:new Date().toISOString()},{username:"aviannaarose",displayName:"Avianna Rose",accountId:"acct_2648cedf59644b0993ade9608bd868a1",inRotation:!0,addedAt:new Date().toISOString()}])await l(e)}var m=a(3258);function p(){let[e,t]=(0,s.useState)([]),[a,o]=(0,s.useState)(!0),[c,p]=(0,s.useState)(null),[x,g]=(0,s.useState)(!1),[h,b]=(0,s.useState)({username:"",displayName:"",email:"",password:""}),[y,f]=(0,s.useState)(!1),[w,N]=(0,s.useState)(null),[j,v]=(0,s.useState)(null),[I,S]=(0,s.useState)(null),k=async()=>{S({type:"loading",message:"Syncing to KV..."});let e=await (0,m.yn)();S({type:e.success?"success":"error",message:e.message}),setTimeout(()=>S(null),5e3)};(0,s.useEffect)(()=>{(async()=>{await u(),t((await i()).sort((e,t)=>e.username.localeCompare(t.username))),o(!1)})(),fetch("/api/credits").then(e=>e.json()).then(e=>{e.balance&&p(e)}).catch(console.error)},[]);let C=async a=>{let n=e.find(e=>e.username===a);if(!n)return;let s={...n,inRotation:!n.inRotation};await l(s),t(e=>e.map(e=>e.username===a?s:e))},P=async()=>{if(!h.username||!h.displayName||!h.email||!h.password){v("All fields are required");return}f(!0),N("Connecting to OnlyFans API..."),v(null);try{let e=await fetch("/api/connect-account",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:h.email,password:h.password})}),a=await e.json();if(!e.ok||"error"===a.status){v(a.error||"Failed to connect account"),f(!1),N(null);return}if(a.needs2fa){N("2FA required - check the OnlyFans API dashboard to complete verification"),f(!1);return}let n=a.accountId;if(!n){v("Connected but no account ID returned - check API dashboard"),f(!1),N(null);return}N("Connected! Saving model...");let s={username:h.username.toLowerCase().replace("@",""),displayName:h.displayName,accountId:n,inRotation:!0,addedAt:new Date().toISOString()};await l(s),t(e=>[...e,s].sort((e,t)=>e.username.localeCompare(t.username))),b({username:"",displayName:"",email:"",password:""}),g(!1),N(null)}catch(e){v(e.message||"Connection failed")}finally{f(!1)}},A=async e=>{confirm(`Remove @${e} from network?`)&&(await d(e),t(t=>t.filter(t=>t.username!==e)))},D=async a=>{let n=prompt(`Enter OnlyFans email for @${a}:`);if(!n)return;let s=prompt(`Enter OnlyFans password for @${a}:`);if(!s)return;let r=e.find(e=>e.username===a);if(r){t(e=>e.map(e=>e.username===a?{...e,accountId:"connecting..."}:e));try{let e=await fetch("/api/connect-account",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,password:s})}),o=await e.json();if(!e.ok||"error"===o.status){alert(`Failed to connect: ${o.error}`),t(e=>e.map(e=>e.username===a?{...e,accountId:null}:e));return}if(o.needs2fa){alert("2FA required - complete verification in the OnlyFans API dashboard"),t(e=>e.map(e=>e.username===a?{...e,accountId:null}:e));return}let c=o.accountId;if(!c){alert("Connected but no account ID returned - check API dashboard"),t(e=>e.map(e=>e.username===a?{...e,accountId:null}:e));return}let i={...r,accountId:c,inRotation:!0};await l(i),t(e=>e.map(e=>e.username===a?i:e))}catch(e){alert(`Connection failed: ${e.message}`),t(e=>e.map(e=>e.username===a?{...e,accountId:null}:e))}}},O=e.filter(e=>e.accountId&&"connecting..."!==e.accountId).length,_=e.filter(e=>e.inRotation&&e.accountId&&"connecting..."!==e.accountId).length;return a?n.jsx("div",{className:"min-h-screen bg-black text-white flex items-center justify-center",children:n.jsx("div",{className:"text-gray-400",children:"Loading network..."})}):(0,n.jsxs)("div",{className:"min-h-screen bg-black text-white",children:[n.jsx("div",{className:"border-b border-gray-800 p-4",children:(0,n.jsxs)("div",{className:"max-w-4xl mx-auto flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[n.jsx(r.default,{href:"/",className:"text-gray-400 hover:text-white",children:"← Back"}),n.jsx("h1",{className:"text-xl font-bold",children:"\uD83D\uDD0C Network Management"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[n.jsx("button",{onClick:k,disabled:I?.type==="loading",className:`px-3 py-1.5 rounded text-sm font-medium transition ${I?.type==="loading"?"bg-gray-700 text-gray-400":I?.type==="success"?"bg-green-600 text-white":I?.type==="error"?"bg-red-600 text-white":"bg-blue-600 hover:bg-blue-500 text-white"}`,children:I?.type==="loading"?"⏳ Syncing...":I?.type==="success"?"✓ Synced!":I?.type==="error"?"✗ Error":"☁️ Sync to KV"}),I&&"loading"!==I.type&&n.jsx("span",{className:`text-xs ${"success"===I.type?"text-green-400":"text-red-400"}`,children:I.message}),c&&(0,n.jsxs)("div",{className:"text-sm",children:[n.jsx("span",{className:"text-gray-400",children:"API Credits:"})," ",n.jsx("span",{className:"text-green-400 font-mono",children:"number"==typeof c.balance?c.balance.toLocaleString():c.balance})]})]})]})}),(0,n.jsxs)("div",{className:"max-w-4xl mx-auto p-4 space-y-6",children:[(0,n.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,n.jsxs)("div",{className:"bg-gray-900 rounded-xl p-4 border border-gray-800",children:[n.jsx("div",{className:"text-3xl font-bold text-white",children:e.length}),n.jsx("div",{className:"text-gray-400 text-sm",children:"Total Models"})]}),(0,n.jsxs)("div",{className:"bg-gray-900 rounded-xl p-4 border border-gray-800",children:[n.jsx("div",{className:"text-3xl font-bold text-green-400",children:O}),n.jsx("div",{className:"text-gray-400 text-sm",children:"Connected to API"})]}),(0,n.jsxs)("div",{className:"bg-gray-900 rounded-xl p-4 border border-gray-800",children:[n.jsx("div",{className:"text-3xl font-bold text-blue-400",children:_}),n.jsx("div",{className:"text-gray-400 text-sm",children:"In Rotation"})]})]}),n.jsx("div",{className:"flex justify-end",children:n.jsx("button",{onClick:()=>{g(!0),v(null),N(null)},className:"px-4 py-2 bg-green-600 hover:bg-green-700 rounded-lg text-sm font-medium",children:"+ Add Model"})}),x&&(0,n.jsxs)("div",{className:"bg-gray-900 rounded-xl p-4 border border-green-800 space-y-4",children:[n.jsx("h3",{className:"font-semibold text-green-400",children:"Add New Model"}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{children:[n.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"OF Username"}),n.jsx("input",{type:"text",value:h.username,onChange:e=>b(t=>({...t,username:e.target.value})),placeholder:"@username",className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white"})]}),(0,n.jsxs)("div",{children:[n.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Display Name"}),n.jsx("input",{type:"text",value:h.displayName,onChange:e=>b(t=>({...t,displayName:e.target.value})),placeholder:"Model Name",className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white"})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{children:[n.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"OF Email"}),n.jsx("input",{type:"email",value:h.email,onChange:e=>b(t=>({...t,email:e.target.value})),placeholder:"model@email.com",className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white"})]}),(0,n.jsxs)("div",{children:[n.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"OF Password"}),n.jsx("input",{type:"password",value:h.password,onChange:e=>b(t=>({...t,password:e.target.value})),placeholder:"••••••••",className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white"})]})]}),w&&(0,n.jsxs)("div",{className:"p-3 bg-blue-900/30 border border-blue-700 rounded-lg text-blue-300 text-sm",children:["⏳ ",w]}),j&&(0,n.jsxs)("div",{className:"p-3 bg-red-900/30 border border-red-700 rounded-lg text-red-300 text-sm",children:["❌ ",j]}),(0,n.jsxs)("div",{className:"flex gap-2 justify-end",children:[n.jsx("button",{onClick:()=>{g(!1),v(null),N(null)},className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg text-sm",children:"Cancel"}),n.jsx("button",{onClick:P,disabled:!h.username||!h.displayName||!h.email||!h.password||y,className:"px-4 py-2 bg-green-600 hover:bg-green-700 rounded-lg text-sm font-medium disabled:opacity-50",children:y?"Connecting...":"Connect & Add"})]})]}),n.jsx("div",{className:"space-y-2",children:e.map(e=>n.jsx("div",{className:`bg-gray-900 rounded-xl p-4 border ${e.accountId&&"connecting..."!==e.accountId?e.inRotation?"border-green-800":"border-yellow-800":"border-gray-800"}`,children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:`w-3 h-3 rounded-full ${"connecting..."===e.accountId?"bg-blue-500 animate-pulse":e.accountId?e.inRotation?"bg-green-500":"bg-yellow-500":"bg-gray-600"}`}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-medium text-white",children:e.displayName}),(0,n.jsxs)("span",{className:"text-gray-500",children:["@",e.username]})]}),n.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"connecting..."===e.accountId?n.jsx("span",{className:"text-blue-400",children:"Connecting..."}):e.accountId?n.jsx("code",{className:"bg-gray-800 px-1 rounded",children:e.accountId}):n.jsx("span",{className:"text-yellow-500",children:"Not connected to API"})})]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[e.accountId&&"connecting..."!==e.accountId?n.jsx("button",{onClick:()=>C(e.username),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition ${e.inRotation?"bg-green-600 hover:bg-green-700 text-white":"bg-gray-700 hover:bg-gray-600 text-gray-300"}`,children:e.inRotation?"✓ In Rotation":"Paused"}):"connecting..."===e.accountId?n.jsx("span",{className:"px-3 py-1.5 bg-blue-600/50 rounded-lg text-sm text-blue-200",children:"Connecting..."}):n.jsx("button",{onClick:()=>D(e.username),className:"px-3 py-1.5 bg-blue-600 hover:bg-blue-700 rounded-lg text-sm font-medium",children:"\uD83D\uDD17 Connect"}),n.jsx("button",{onClick:()=>A(e.username),className:"px-2 py-1.5 bg-red-600/20 hover:bg-red-600/40 rounded-lg text-red-400 text-sm",children:"\uD83D\uDDD1"})]})]})},e.username))}),(0,n.jsxs)("div",{className:"bg-gray-900 rounded-xl p-4 border border-gray-800 text-sm text-gray-400",children:[n.jsx("h3",{className:"font-semibold text-white mb-2",children:"\uD83D\uDCA1 How it works"}),(0,n.jsxs)("ul",{className:"space-y-1 list-disc list-inside",children:[(0,n.jsxs)("li",{children:[n.jsx("span",{className:"text-green-400",children:"Green"})," = Connected & in rotation (will post/receive promos)"]}),(0,n.jsxs)("li",{children:[n.jsx("span",{className:"text-yellow-400",children:"Yellow"})," = Connected but paused (no promos, saves API calls)"]}),(0,n.jsxs)("li",{children:[n.jsx("span",{className:"text-gray-400",children:"Gray"})," = Not connected - click Connect to add credentials"]}),(0,n.jsxs)("li",{children:["If 2FA is required, you'll need to verify in the ",n.jsx("a",{href:"https://app.onlyfansapi.com",target:"_blank",className:"text-blue-400 hover:underline",children:"OnlyFans API Dashboard"})]})]})]})]})]})}},3258:(e,t,a)=>{"use strict";async function n(e){return[]}async function s(e,t){}async function r(e=15){return{}}async function o(){return 0}async function c(){return{mappings:{},models:[]}}async function i(){try{let{mappings:e,models:t}=await c(),a=await fetch("/api/sync/vault-mappings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mappings:e,models:t})}),n=await a.json();if(n.success)return{success:!0,message:`Synced ${t.length} models with ${n.totalVaultIds} vault mappings`};return{success:!1,message:n.error||"Sync failed"}}catch(e){return{success:!1,message:String(e)}}}a.d(t,{TU:()=>o,lL:()=>n,saveImages:()=>s,xA:()=>r,yn:()=>i})},2917:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r,metadata:()=>s});var n=a(5036);a(7272);let s={title:"S4S Manager - Plush",description:"Cross-promotional automation for OnlyFans"};function r({children:e}){return n.jsx("html",{lang:"en",children:n.jsx("body",{className:"min-h-screen",children:e})})}},3534:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>r,__esModule:()=>s,default:()=>o});let n=(0,a(6843).createProxy)(String.raw`/Users/moltplush/.openclaw/workspace/s4s-app/app/network/page.tsx`),{__esModule:s,$$typeof:r}=n,o=n.default},7272:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),n=t.X(0,[638,356,506],()=>a(4675));module.exports=n})();