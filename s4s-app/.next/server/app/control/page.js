(()=>{var e={};e.id=350,e.ids=[350],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8977:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>d,routeModule:()=>p,tree:()=>o});var s=a(482),n=a(9108),r=a(2563),l=a.n(r),i=a(8300),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);a.d(t,c);let o=["",{children:["control",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,3248)),"/Users/moltplush/.openclaw/workspace/s4s-app/app/control/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,2917)),"/Users/moltplush/.openclaw/workspace/s4s-app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,9361,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/moltplush/.openclaw/workspace/s4s-app/app/control/page.tsx"],m="/control/page",u={require:a,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/control/page",pathname:"/control",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},2058:(e,t,a)=>{Promise.resolve().then(a.bind(a,4843))},3341:()=>{},8606:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,2583,23)),Promise.resolve().then(a.t.bind(a,6840,23)),Promise.resolve().then(a.t.bind(a,8771,23)),Promise.resolve().then(a.t.bind(a,3225,23)),Promise.resolve().then(a.t.bind(a,9295,23)),Promise.resolve().then(a.t.bind(a,3982,23))},4843:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var s=a(5344),n=a(3729),r=a(6506),l=a(1648),i=a(3258);function c(){let[e,t]=(0,n.useState)(null),[a,c]=(0,n.useState)(!1),[o,d]=(0,n.useState)(!1),[m,u]=(0,n.useState)(null),[p,h]=(0,n.useState)(null),[x,b]=(0,n.useState)(!0),g=(0,n.useCallback)(async()=>{try{let e=await fetch("/api/rotation/control"),a=await e.json();t(a)}catch(e){console.error("Failed to fetch status:",e)}finally{b(!1)}},[]);(0,n.useEffect)(()=>{g();let e=setInterval(g,1e4);return()=>clearInterval(e)},[g]);let f=async()=>{c(!0),u(null);try{let e={},t=[];for(let a of l.aT)for(let s of(t.push({id:a.id,username:a.username}),await (0,i.lL)(a.username)))if(s.isActive&&s.vaultIds)for(let[t,n]of Object.entries(s.vaultIds))e[t]||(e[t]={}),e[t][a.username]=n;let a=await fetch("/api/sync/vault-mappings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mappings:e,models:t})}),s=await a.json();s.success?u(`✅ Synced ${s.modelCount} models with ${s.totalVaultIds} vault mappings`):u(`❌ ${s.error}`)}catch(e){u(`❌ Error: ${e}`)}finally{c(!1)}},y=async(e=14)=>{d(!0),h(null);try{let t=await fetch("/api/schedule/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({days:e})}),a=await t.json();a.success?(h(`✅ Generated ${a.totalSlots} tags over ${a.days} days (~${a.avgPerDay}/day)`),g()):h(`❌ ${a.error}`)}catch(e){h(`❌ Error: ${e}`)}finally{d(!1)}},v=async e=>{try{let t=await fetch("/api/rotation/control",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:e})});await t.json(),g()}catch(e){console.error("Control error:",e)}},j=async()=>{try{let e=await fetch("/api/cron/tick"),t=await e.json();console.log("Manual tick result:",t),g()}catch(e){console.error("Tick error:",e)}};return x?s.jsx("main",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900 p-8 flex items-center justify-center",children:s.jsx("div",{className:"text-white text-xl",children:"Loading..."})}):s.jsx("main",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900 p-8",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,s.jsxs)("div",{children:[s.jsx(r.default,{href:"/",className:"text-purple-400 hover:text-purple-300 mb-2 inline-block",children:"← Back to Dashboard"}),s.jsx("h1",{className:"text-3xl font-bold text-white",children:"\uD83C\uDF9B️ Rotation Control Panel"}),s.jsx("p",{className:"text-gray-400",children:"Set it and forget it — runs autonomously"})]}),s.jsx("div",{className:`px-4 py-2 rounded-full text-lg font-bold ${e?.active?"bg-green-600 text-white animate-pulse":"bg-gray-600 text-gray-300"}`,children:e?.active?"\uD83D\uDFE2 RUNNING":"⏸️ PAUSED"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[(0,s.jsxs)("div",{className:"bg-gray-800/50 rounded-lg p-4 border border-gray-700",children:[s.jsx("div",{className:"text-2xl font-bold text-white",children:e?.totalSlots||0}),s.jsx("div",{className:"text-gray-400 text-sm",children:"Total Scheduled"})]}),(0,s.jsxs)("div",{className:"bg-gray-800/50 rounded-lg p-4 border border-gray-700",children:[s.jsx("div",{className:"text-2xl font-bold text-green-400",children:e?.executed||0}),s.jsx("div",{className:"text-gray-400 text-sm",children:"Executed"})]}),(0,s.jsxs)("div",{className:"bg-gray-800/50 rounded-lg p-4 border border-gray-700",children:[s.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:e?.remaining||0}),s.jsx("div",{className:"text-gray-400 text-sm",children:"Remaining"})]}),(0,s.jsxs)("div",{className:"bg-gray-800/50 rounded-lg p-4 border border-gray-700",children:[s.jsx("div",{className:"text-2xl font-bold text-purple-400",children:e?.pendingDeletions||0}),s.jsx("div",{className:"text-gray-400 text-sm",children:"Pending Deletes"})]})]}),(0,s.jsxs)("div",{className:"bg-gray-800/50 rounded-xl p-6 border border-gray-700 mb-6",children:[s.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"\uD83D\uDCCB Setup Steps"}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-white",children:"1. Sync Vault Mappings"}),s.jsx("p",{className:"text-gray-400 text-sm",children:"Push your local vault IDs to the server"})]}),s.jsx("button",{onClick:f,disabled:a,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium disabled:opacity-50",children:a?"⏳ Syncing...":"\uD83D\uDCE4 Sync Now"})]}),m&&s.jsx("div",{className:`p-3 rounded-lg text-sm ${m.includes("✅")?"bg-green-900/30 text-green-400":"bg-red-900/30 text-red-400"}`,children:m})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-white",children:"2. Generate 14-Day Schedule"}),s.jsx("p",{className:"text-gray-400 text-sm",children:"Create the rotation plan"})]}),s.jsx("button",{onClick:()=>y(14),disabled:o,className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-medium disabled:opacity-50",children:o?"⏳ Generating...":"\uD83D\uDCC5 Generate"})]}),p&&s.jsx("div",{className:`p-3 rounded-lg text-sm ${p.includes("✅")?"bg-green-900/30 text-green-400":"bg-red-900/30 text-red-400"}`,children:p}),e?.scheduleGeneratedAt&&(0,s.jsxs)("div",{className:"text-gray-500 text-xs mt-1",children:["Last generated: ",new Date(e.scheduleGeneratedAt).toLocaleString()]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-white",children:"3. Start Rotation"}),s.jsx("p",{className:"text-gray-400 text-sm",children:"Begin autonomous posting"})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[e?.active?s.jsx("button",{onClick:()=>v("stop"),className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium",children:"⏹️ Stop"}):s.jsx("button",{onClick:()=>v("start"),disabled:!e?.totalSlots,className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium disabled:opacity-50",children:"▶️ Start"}),s.jsx("button",{onClick:j,className:"px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-medium",title:"Manually trigger one tick",children:"\uD83D\uDD04 Manual Tick"})]})]}),e?.lastTick&&(0,s.jsxs)("div",{className:"text-gray-500 text-xs",children:["Last tick: ",new Date(e.lastTick).toLocaleString()]})]})]}),(0,s.jsxs)("div",{className:"bg-yellow-900/20 border border-yellow-700/50 rounded-xl p-6 mb-6",children:[s.jsx("h3",{className:"text-lg font-bold text-yellow-400 mb-2",children:"⚠️ External Cron Required"}),s.jsx("p",{className:"text-gray-300 mb-3",children:'For true "set and forget", set up a free cron service to ping this URL every minute:'}),s.jsx("code",{className:"block bg-black/50 p-3 rounded text-green-400 text-sm mb-3 break-all",children:"GET https://s4s-app.vercel.app/api/cron/tick"}),(0,s.jsxs)("p",{className:"text-gray-400 text-sm",children:["Recommended: ",s.jsx("a",{href:"https://cron-job.org",target:"_blank",className:"text-blue-400 hover:underline",children:"cron-job.org"})," (free) or ",s.jsx("a",{href:"https://easycron.com",target:"_blank",className:"text-blue-400 hover:underline",children:"EasyCron"})]})]}),e?.recentActivity&&e.recentActivity.length>0&&(0,s.jsxs)("div",{className:"bg-gray-800/50 rounded-xl p-6 border border-gray-700",children:[s.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"\uD83D\uDCCA Recent Activity"}),s.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:e.recentActivity.map((e,t)=>s.jsx("div",{className:"bg-gray-700/30 rounded-lg p-3 text-sm",children:(0,s.jsxs)("div",{className:"flex justify-between text-gray-400",children:[s.jsx("span",{children:new Date(e.timestamp).toLocaleString()}),(0,s.jsxs)("span",{children:["✅ ",e.tagsExecuted," tags | \uD83D\uDDD1️ ",e.postsDeleted," deleted"]})]})},t))})]}),s.jsx("div",{className:"mt-6 text-center",children:s.jsx("button",{onClick:()=>{confirm("Reset all schedule data? This cannot be undone.")&&v("reset")},className:"text-red-400 hover:text-red-300 text-sm",children:"\uD83D\uDDD1️ Reset All Schedule Data"})})]})})}},3258:(e,t,a)=>{"use strict";async function s(e){return[]}async function n(e,t){}async function r(e=15){return{}}async function l(){return 0}async function i(){return{mappings:{},models:[]}}async function c(){try{let{mappings:e,models:t}=await i(),a=await fetch("/api/sync/vault-mappings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mappings:e,models:t})}),s=await a.json();if(s.success)return{success:!0,message:`Synced ${t.length} models with ${s.totalVaultIds} vault mappings`};return{success:!1,message:s.error||"Sync failed"}}catch(e){return{success:!1,message:String(e)}}}a.d(t,{EY:()=>n,TU:()=>l,lL:()=>s,xA:()=>r,yn:()=>c})},1648:(e,t,a)=>{"use strict";function s(e){return 0===e.fans?0:e.totalEarnings/e.fans}a.d(t,{aT:()=>n,c$:()=>r,uM:()=>s});let n=[{id:"acct_ebca85077e0a4b7da04cf14176466411",username:"milliexhart",displayName:"Millie Hart",fans:2547,likes:1141,avatar:"https://thumbs.onlyfans.com/public/files/thumbs/c144/i/im/imm/immx4rrlkhilts5dh39x83bedpl6wyng1768418465/544695119/avatar.jpg",connected:!0,totalEarnings:7408.18},{id:"acct_f05bf7874c974a5d875a1ef01c5bbc3b",username:"zoepriceee",displayName:"Zoe Price",fans:3619,likes:1267,avatar:"https://thumbs.onlyfans.com/public/files/thumbs/c144/m/md/mdn/mdnhc1nz9ox94ihg7u16t8rhyjv6jged1768087936/544182349/avatar.jpg",connected:!0,totalEarnings:9141.66},{id:"acct_9ee32f0bac4e4e8394a09f2c9fa2fbb7",username:"novaleighh",displayName:"Nova Leigh",fans:3368,likes:1603,avatar:"https://thumbs.onlyfans.com/public/files/thumbs/c144/i/ie/ie0/ie0meiwycqhcehkd78v4l9dbnaxw1z6y1768093624/543468095/avatar.jpg",connected:!0,totalEarnings:11754.34},{id:"acct_0653d6e6c3984bea8d3adc84cc616c7c",username:"lucymonroee",displayName:"Lucy Monroe",fans:1129,likes:441,avatar:"https://thumbs.onlyfans.com/public/files/thumbs/c144/s/sq/sqp/sqpf8x4pmbvxrnymrxfypbed1mfpuk2e1769621307/543659016/avatar.jpg",connected:!0,totalEarnings:2454.68},{id:"acct_6bb6d77ac2c741ecb54d865237bb04f4",username:"chloecookk",displayName:"Chloe Cook",fans:7541,likes:4519,avatar:"https://thumbs.onlyfans.com/public/files/thumbs/c144/m/md/mdl/mdlfvy5r0vparh7hhfajc6t6jk9ol6al1767766776/543655743/avatar.jpg",connected:!0,totalEarnings:55865.34},{id:"acct_bd6a75d6943141589cf5e43586653258",username:"jackiesmithh",displayName:"Jackie Smith",fans:1570,likes:1026,avatar:"https://thumbs.onlyfans.com/public/files/thumbs/c144/e/e9/e9m/e9m0roaeabodtursjgckicnhxqxdtizv1759783375/527476418/avatar.jpg",connected:!0,totalEarnings:4886.94},{id:"acct_749c75e13d7e4685813f2a2867ce614d",username:"brookeewest",displayName:"Brooke West",fans:2462,likes:1676,avatar:"https://thumbs.onlyfans.com/public/files/thumbs/c144/r/rl/rlu/rluvlnnlbfqerqrp91eg7jsfpxjlf3a31762104304/531889164/avatar.jpg",connected:!0,totalEarnings:7298.48},{id:"acct_b0b0698a614643c5932cfccd23f7c430",username:"ayaaann",displayName:"Aya Ann",fans:7113,likes:7190,avatar:"https://thumbs.onlyfans.com/public/files/thumbs/c144/s/sc/scq/scqnyfycb5bif9h3ocalfv18m2xdtxud1758769408/525242883/avatar.jpg",connected:!0,totalEarnings:32150.95},{id:"acct_b5e739f9f40a4da99b2f5ca559168012",username:"chloeecavalli",displayName:"Chloe Cavalli",fans:3294,likes:1812,avatar:"https://thumbs.onlyfans.com/public/files/thumbs/c144/a/aw/awu/awuql1oyh5f663gf75tycuv5s9ipephj1766518426/537028788/avatar.jpg",connected:!0,totalEarnings:10089.31},{id:"acct_cfb853d0ba714aeaa9a89e3026ec6190",username:"sadieeblake",displayName:"Sadie Blake",fans:29749,likes:33331,avatar:"https://thumbs.onlyfans.com/public/files/thumbs/c144/z/zw/zwk/zwkype5jeyivmb287n1ba6yd6wmfvdgr1764902344/526616700/avatar.jpg",connected:!0,totalEarnings:212170.56},{id:"acct_bde8d615937548f18c4e54b7cedf8c1d",username:"lolasinclairr",displayName:"Lola Sinclair",fans:4815,likes:2211,avatar:"https://thumbs.onlyfans.com/public/files/thumbs/c144/3/3p/3pt/3ptchepy7oro0ypbpnjpiydd4ancwno91769395473/543872404/avatar.jpg",connected:!0,totalEarnings:14463.57},{id:"acct_a50799a789a6422c8389d7d055fcbd1a",username:"maddieharperr",displayName:"Maddie Harper",fans:4400,likes:3338,avatar:"https://thumbs.onlyfans.com/public/files/thumbs/c144/s/se/seq/seqtznbuzdeuvuyq0rqx8jdhilxqbefp1762004551/529687791/avatar.jpg",connected:!0,totalEarnings:28263.34},{id:"acct_fbd172e2681f4dfbb6026ce806ecaa28",username:"zoeemonroe",displayName:"Zoe Monroe",fans:10177,likes:12251,avatar:"https://thumbs.onlyfans.com/public/files/thumbs/c144/u/u3/u3v/u3vqfnlgcrqkgue7rbt5r0xjpkua0fuw1757346851/522110263/avatar.jpg",connected:!0,totalEarnings:47298.83},{id:"acct_54e3119e77da4429b6537f7dd2883a05",username:"biancaawoods",displayName:"Bianca Woods",fans:7453,likes:4762,avatar:"https://thumbs.onlyfans.com/public/files/thumbs/c144/3/3m/3mm/3mmvdpvsmezdphq6mpdqxwy3wl0wf1kg1762789515/525755724/avatar.jpg",connected:!0,totalEarnings:45993.3},{id:"acct_2648cedf59644b0993ade9608bd868a1",username:"aviannaarose",displayName:"Avianna Rose",fans:2649,likes:2514,avatar:"https://thumbs.onlyfans.com/public/files/thumbs/c144/r/rn/rnd/rndb0kveiej4fnsrgrakmbiuy2iktzki1762744168/532745754/avatar.jpg",connected:!0,totalEarnings:20613.97}],r={totalModels:15,totalFans:n.reduce((e,t)=>e+t.fans,0),totalLikes:n.reduce((e,t)=>e+t.likes,0),totalEarnings:n.reduce((e,t)=>e+t.totalEarnings,0),avgLTV:n.reduce((e,t)=>e+t.totalEarnings,0)/n.reduce((e,t)=>e+t.fans,0)||0,topPerformer:n.reduce((e,t)=>t.fans>e.fans?t:e,n[0]),topEarner:n.reduce((e,t)=>t.totalEarnings>e.totalEarnings?t:e,n[0])}},3248:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>r,__esModule:()=>n,default:()=>l});let s=(0,a(6843).createProxy)(String.raw`/Users/moltplush/.openclaw/workspace/s4s-app/app/control/page.tsx`),{__esModule:n,$$typeof:r}=s,l=s.default},2917:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r,metadata:()=>n});var s=a(5036);a(7272);let n={title:"S4S Manager - Plush",description:"Cross-promotional automation for OnlyFans"};function r({children:e}){return s.jsx("html",{lang:"en",children:s.jsx("body",{className:"min-h-screen",children:e})})}},7272:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[638,356,506],()=>a(8977));module.exports=s})();