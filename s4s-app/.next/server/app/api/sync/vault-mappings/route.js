"use strict";(()=>{var e={};e.id=152,e.ids=[152],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6005:e=>{e.exports=require("node:crypto")},8806:(e,t,a)=>{a.r(t),a.d(t,{headerHooks:()=>v,originalPathname:()=>h,patchFetch:()=>k,requestAsyncStorage:()=>g,routeModule:()=>c,serverHooks:()=>m,staticGenerationAsyncStorage:()=>d,staticGenerationBailout:()=>y});var s={};a.r(s),a.d(s,{GET:()=>u,POST:()=>l});var n=a(5419),r=a(9108),o=a(9678),i=a(8070),p=a(3334);async function u(){try{let e=await p.kv.get("vault_mappings")||{},t=await p.kv.get("models")||[],a=await p.kv.get("last_sync")||null;return i.Z.json({success:!0,mappings:e,models:t,lastSync:a,modelCount:t.length,mappingCount:Object.keys(e).length})}catch(e){return console.error("Get vault mappings error:",e),i.Z.json({error:"Failed to get vault mappings",details:String(e)},{status:500})}}async function l(e){try{let{mappings:t,models:a}=await e.json();if(!t||!a)return i.Z.json({error:"Missing required fields",required:["mappings","models"]},{status:400});await p.kv.set("vault_mappings",t),await p.kv.set("models",a),await p.kv.set("last_sync",new Date().toISOString());let s=0;for(let e of Object.keys(t))s+=Object.keys(t[e]||{}).length;return i.Z.json({success:!0,modelCount:a.length,mappingCount:Object.keys(t).length,totalVaultIds:s,syncedAt:new Date().toISOString(),message:`Synced ${a.length} models with ${s} vault mappings`})}catch(e){return console.error("Sync vault mappings error:",e),i.Z.json({error:"Failed to sync vault mappings",details:String(e)},{status:500})}}let c=new n.AppRouteRouteModule({definition:{kind:r.x.APP_ROUTE,page:"/api/sync/vault-mappings/route",pathname:"/api/sync/vault-mappings",filename:"route",bundlePath:"app/api/sync/vault-mappings/route"},resolvedPagePath:"/Users/moltplush/.openclaw/workspace/s4s-app/app/api/sync/vault-mappings/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:g,staticGenerationAsyncStorage:d,serverHooks:m,headerHooks:v,staticGenerationBailout:y}=c,h="/api/sync/vault-mappings/route";function k(){return(0,o.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:d})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[638,206,334],()=>a(8806));module.exports=s})();