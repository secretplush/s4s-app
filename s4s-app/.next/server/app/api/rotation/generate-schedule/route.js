"use strict";(()=>{var e={};e.id=595,e.ids=[595],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6005:e=>{e.exports=require("node:crypto")},2614:(e,a,t)=>{t.r(a),t.d(a,{headerHooks:()=>_,originalPathname:()=>k,patchFetch:()=>w,requestAsyncStorage:()=>h,routeModule:()=>m,serverHooks:()=>g,staticGenerationAsyncStorage:()=>p,staticGenerationBailout:()=>y});var c={};t.r(c),t.d(c,{GET:()=>f,POST:()=>b});var r=t(5419),s=t(9108),d=t(9678),n=t(8070),o=t(3334);let i=[{id:"acct_ebca85077e0a4b7da04cf14176466411",username:"milliexhart"},{id:"acct_f05bf7874c974a5d875a1ef01c5bbc3b",username:"zoepriceee"},{id:"acct_9ee32f0bac4e4e8394a09f2c9fa2fbb7",username:"novaleighh"},{id:"acct_0653d6e6c3984bea8d3adc84cc616c7c",username:"lucymonroee"},{id:"acct_6bb6d77ac2c741ecb54d865237bb04f4",username:"chloecookk"},{id:"acct_bd6a75d6943141589cf5e43586653258",username:"jackiesmithh"},{id:"acct_749c75e13d7e4685813f2a2867ce614d",username:"brookeewest"},{id:"acct_b0b0698a614643c5932cfccd23f7c430",username:"ayaaann"},{id:"acct_b5e739f9f40a4da99b2f5ca559168012",username:"chloeecavalli"},{id:"acct_cfb853d0ba714aeaa9a89e3026ec6190",username:"sadieeblake"},{id:"acct_bde8d615937548f18c4e54b7cedf8c1d",username:"lolasinclairr"},{id:"acct_a50799a789a6422c8389d7d055fcbd1a",username:"maddieharperr"},{id:"acct_fbd172e2681f4dfbb6026ce806ecaa28",username:"zoeemonroe"},{id:"acct_54e3119e77da4429b6537f7dd2883a05",username:"biancaawoods"},{id:"acct_2648cedf59644b0993ade9608bd868a1",username:"aviannaarose"},{id:"acct_29037b1ef83d4c838ab2ec49d61d26f6",username:"jessicaparkerrr"},{id:"acct_487806e5751b487bb302793ee1c3ef2c",username:"kaliblakexo"},{id:"acct_c85c710e083f4b4a94d826f76855543d",username:"laceythomass"},{id:"acct_04d878af1813422fa6b310991f687d73",username:"lindamarievip"},{id:"acct_e84886b3217e4fbd8f82ee63ca8894e8",username:"lilyyymonroee"},{id:"acct_bfd09358f67849cba6d9f8cf4a565cd2",username:"dollyrhodesss"},{id:"acct_b5f1a5fc3cfd4a959dbea7230814ae71",username:"chelseapaige"},{id:"acct_8b4b062aeef1441ba8f51a7b0f3fe5f2",username:"thesarasky"},{id:"acct_15870053c2604e0f9e94d14a10749923",username:"yourrfavblondie"},{id:"acct_7a273714a275417992b0f7c1d3389a2c",username:"skyyroseee"},{id:"acct_766a8451ee6946009d20581ab11fdfc4",username:"tyybabyy"},{id:"acct_ac70731a489741f0b6abc45a050f0301",username:"itsmealexisrae"},{id:"acct_40e51b831b3247ac806755362b494fe5",username:"lolaxmae"},{id:"acct_6f2328ebe4c446038ea1847d2dbecc17",username:"rebeccabrownn"},{id:"acct_9665889fec2b46e9a05232afee59ef19",username:"oliviabrookess"}],u={0:4,1:9,2:6,3:3,4:8,5:4,6:4,7:7,8:3,9:3,10:8,11:5,12:5,13:6,14:6,15:3,16:6,17:3,18:3,19:4,20:3,21:4,22:3,23:3};function l(){let e=i.length,a={},t=e-1,c=t*Math.max(1,Math.round(56/t)),r=Date.now(),s=Math.floor((r-new Date(new Date().getFullYear(),0,0).getTime())/864e5),d=e=>{let a=1e4*Math.sin(e);return a-Math.floor(a)};for(let t=0;t<e;t++){let n=i[t];a[n.username]=[];let o=864e5/c,l=(1+4*Math.random())*6e4,f=12e4*t;for(let b=0;b<c;b++){let c=(t+b%(e-1)+1)%e;c===t&&(c=(c+1)%e);let m=i[c],h=r+l+f+b*o,p=new Date(h+=(d(1e3*s+100*t+b)-.5)*36e4).getHours();if(2>=(u[p]||5)){for(let e of[1,2,-1,-2])if(u[(p+e+24)%24]>3){h+=36e5*e;break}}a[n.username].push({target:m.username,scheduledTime:h,executed:!1})}a[n.username].sort((e,a)=>e.scheduledTime-a.scheduledTime)}return a}async function f(){let e=l(),a=Object.values(e).reduce((e,a)=>e+a.length,0),t=Object.keys(e).length,c={},r=Date.now();for(let[a,t]of Object.entries(e))c[a]=t.slice(0,3).map(e=>({target:e.target,inMinutes:Math.round((e.scheduledTime-r)/6e4)}));return n.Z.json({models:t,totalTags:a,tagsPerModel:Math.round(a/t),preview:c})}async function b(){let e=process.env.RAILWAY_URL||"https://s4s-worker-production.up.railway.app";try{let a=l(),t=Object.values(a).reduce((e,a)=>e+a.length,0),c=Object.keys(a).length;console.log(`ðŸ“… Generated schedule: ${c} models, ${t} total tags`);let r=await fetch(`${e}/schedule`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({schedule:a})});if(!r.ok){let e=await r.text();return n.Z.json({success:!1,error:`Railway rejected schedule: ${e}`},{status:500})}let s=await r.json();return await o.kv.set("s4s:last-schedule-generation",{timestamp:Date.now(),models:c,totalTags:t}),n.Z.json({success:!0,models:c,totalTags:t,message:`Schedule pushed to Railway: ${c} models, ${t} tags`,railway:s})}catch(e){return console.error("Schedule generation error:",e),n.Z.json({success:!1,error:`Failed to generate/push schedule: ${e}`},{status:500})}}let m=new r.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/rotation/generate-schedule/route",pathname:"/api/rotation/generate-schedule",filename:"route",bundlePath:"app/api/rotation/generate-schedule/route"},resolvedPagePath:"/Users/moltplush/.openclaw/workspace/s4s-app/app/api/rotation/generate-schedule/route.ts",nextConfigOutput:"",userland:c}),{requestAsyncStorage:h,staticGenerationAsyncStorage:p,serverHooks:g,headerHooks:_,staticGenerationBailout:y}=m,k="/api/rotation/generate-schedule/route";function w(){return(0,d.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:p})}}};var a=require("../../../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),c=a.X(0,[638,206,334],()=>t(2614));module.exports=c})();