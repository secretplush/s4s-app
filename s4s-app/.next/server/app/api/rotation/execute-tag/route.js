"use strict";(()=>{var e={};e.id=31,e.ids=[31],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4311:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>f,originalPathname:()=>j,patchFetch:()=>v,requestAsyncStorage:()=>g,routeModule:()=>l,serverHooks:()=>h,staticGenerationAsyncStorage:()=>m,staticGenerationBailout:()=>x});var a={};r.r(a),r.d(a,{GET:()=>c,POST:()=>d});var o=r(5419),s=r(9108),n=r(9678),i=r(8070);let u=process.env.OF_API_KEY||"ofapi_bT4J1Er2YBow46EihDfjlSFf5HRmiM15M4DCOoHn7889d8b4",p=[];async function d(e){try{let{promoterUsername:t,targetUsername:r,vaultId:a,caption:o,account:s}=await e.json();if(!t||!r||!a||!o||!s)return i.Z.json({error:"Missing required fields",required:["promoterUsername","targetUsername","vaultId","caption","account"]},{status:400});let n=await fetch(`https://app.onlyfansapi.com/api/${s}/posts`,{method:"POST",headers:{Authorization:`Bearer ${u}`,"Content-Type":"application/json"},body:JSON.stringify({text:o,mediaFiles:[a]})});if(!n.ok){let e=await n.text();return i.Z.json({error:"Failed to create post",details:e},{status:500})}let p=await n.json(),d=p.id||p.post_id||p.postId||p.data?.id||p.data?.post_id||p.post?.id||p.response?.id;if(!d)return i.Z.json({error:"Post created but no ID returned",data:p,keys:Object.keys(p)},{status:200});let c=Date.now()+3e5;return i.Z.json({success:!0,postId:d,promoter:t,target:r,deleteAt:c,deleteAtFormatted:new Date(c).toISOString(),message:`Ghost tag created: @${t} â†’ @${r}. Delete scheduled for 5 min.`})}catch(e){return console.error("Execute tag error:",e),i.Z.json({error:"Internal server error",details:String(e)},{status:500})}}async function c(){return i.Z.json({status:"ready",pendingDeletions:p.length,usage:"POST with { promoterUsername, targetUsername, vaultId, caption, account }"})}let l=new o.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/rotation/execute-tag/route",pathname:"/api/rotation/execute-tag",filename:"route",bundlePath:"app/api/rotation/execute-tag/route"},resolvedPagePath:"/Users/moltplush/.openclaw/workspace/s4s-app/app/api/rotation/execute-tag/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:g,staticGenerationAsyncStorage:m,serverHooks:h,headerHooks:f,staticGenerationBailout:x}=l,j="/api/rotation/execute-tag/route";function v(){return(0,n.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:m})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[638,206],()=>r(4311));module.exports=a})();