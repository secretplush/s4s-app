"use strict";(()=>{var e={};e.id=501,e.ids=[501],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},5010:(e,t,a)=>{a.r(t),a.d(t,{headerHooks:()=>_,originalPathname:()=>$,patchFetch:()=>g,requestAsyncStorage:()=>m,routeModule:()=>b,serverHooks:()=>w,staticGenerationAsyncStorage:()=>h,staticGenerationBailout:()=>v});var r={};a.r(r),a.d(r,{POST:()=>p,maxDuration:()=>d});var i=a(5419),o=a(9108),c=a(9678),n=a(8070);let d=300,l="https://app.onlyfansapi.com/api",s=process.env.OF_API_KEY||"ofapi_bT4J1Er2YBow46EihDfjlSFf5HRmiM15M4DCOoHn7889d8b4",u={milliexhart:"acct_ebca85077e0a4b7da04cf14176466411",zoepriceee:"acct_f05bf7874c974a5d875a1ef01c5bbc3b",novaleighh:"acct_9ee32f0bac4e4e8394a09f2c9fa2fbb7",lucymonroee:"acct_0653d6e6c3984bea8d3adc84cc616c7c",chloecookk:"acct_6bb6d77ac2c741ecb54d865237bb04f4",jackiesmithh:"acct_bd6a75d6943141589cf5e43586653258",brookeewest:"acct_749c75e13d7e4685813f2a2867ce614d",ayaaann:"acct_b0b0698a614643c5932cfccd23f7c430",chloeecavalli:"acct_b5e739f9f40a4da99b2f5ca559168012",sadieeblake:"acct_cfb853d0ba714aeaa9a89e3026ec6190",lolasinclairr:"acct_bde8d615937548f18c4e54b7cedf8c1d",maddieharperr:"acct_a50799a789a6422c8389d7d055fcbd1a",zoeemonroe:"acct_fbd172e2681f4dfbb6026ce806ecaa28",biancaawoods:"acct_54e3119e77da4429b6537f7dd2883a05",aviannaarose:"acct_2648cedf59644b0993ade9608bd868a1"};async function f(e,t,a,r){let i=u[e];if(!i)return{vaultId:null,error:`No account ID for ${e}`};try{let{buffer:e,mimeType:o}=function(e){let t=e.match(/^data:(.+);base64,(.+)$/);if(!t)throw Error("Invalid base64 data URL");return{mimeType:t[1],buffer:Buffer.from(t[2],"base64")}}(t),c=new FormData,n=new Blob([e],{type:o});c.append("file",n,a);let d=await fetch(`${l}/${i}/media/upload`,{method:"POST",headers:{Authorization:`Bearer ${s}`},body:c});if(!d.ok){let e=await d.text();return{vaultId:null,error:`Upload failed: ${e}`}}let u=await d.json(),f=u.prefixed_id||u.id||u.media_id;if(!f)return{vaultId:null,error:`No media ID returned from upload: ${JSON.stringify(u)}`};await new Promise(e=>setTimeout(e,11e3));let p=await fetch(`${l}/${i}/posts`,{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify({text:`@${r}`,mediaFiles:[f]})});if(!p.ok){let e=await p.text();return{vaultId:null,error:`Post creation failed: ${e}`}}let b=await p.json(),m=b.data||b,h=m.id||m.post_id,w=null;if(m.media&&m.media.length>0&&(w=m.media[0].id?.toString()||m.media[0].vault_id?.toString()),h){await new Promise(e=>setTimeout(e,2e3));let e=await fetch(`${l}/${i}/posts/${h}`,{method:"DELETE",headers:{Authorization:`Bearer ${s}`}});e.ok||console.error(`Failed to delete post ${h}: ${await e.text()}`)}if(!w)return{vaultId:null,error:"Could not extract vault_id from post"};return{vaultId:w}}catch(e){return{vaultId:null,error:`Exception: ${e}`}}}async function p(e){try{let{imageBase64:t,filename:a,sourceUsername:r,targetUsernames:i}=await e.json();if(!t||!i||0===i.length)return n.Z.json({error:"Missing required fields"},{status:400});let o=i.map(async(e,i)=>{await new Promise(e=>setTimeout(e,1e3*i)),console.log(`Distributing to ${e}...`);let{vaultId:o,error:c}=await f(e,t,a,r);return{username:e,vaultId:o,error:c}}),c=await Promise.all(o),d=c.filter(e=>null!==e.vaultId),l=c.filter(e=>null===e.vaultId);return n.Z.json({success:!0,sourceUsername:r,distributed:d.length,failed:l.length,results:c})}catch(e){return console.error("Distribution error:",e),n.Z.json({error:String(e)},{status:500})}}let b=new i.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/distribute/route",pathname:"/api/distribute",filename:"route",bundlePath:"app/api/distribute/route"},resolvedPagePath:"/Users/moltplush/.openclaw/workspace/s4s-app/app/api/distribute/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:m,staticGenerationAsyncStorage:h,serverHooks:w,headerHooks:_,staticGenerationBailout:v}=b,$="/api/distribute/route";function g(){return(0,c.patchFetch)({serverHooks:w,staticGenerationAsyncStorage:h})}}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[638,206],()=>a(5010));module.exports=r})();