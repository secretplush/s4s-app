# 2026-02-20

## Bianca Chatbot — v7 Architecture Finalized

### Pure Python daemon + decision-only Opus
**bianca-daemon.py** on port 8901 (launchd auto-restart):
1. Railway poller (every 5s) picks up pending fan messages
2. Sales engine — rule-based auto-replies handle ~50% of messages, ZERO AI cost
3. Opus path — daemon → hooks/wake → main session → sessions_spawn (12.3K tokens)
4. Mass bumps — `bianca-mass-bump.py` via launchd hourly, pure Python

### Sales engine escalation ladder ($0 spend fans)
- Msg 1-2: Greet + selfie → Msg 3-4: Tease → Msg 5: Free pic → Msg 6-8: $18 PPV
- Buying/sexual signals skip straight to PPV
- $50+ spenders always get Opus

### Key: Opus is decision-only
Reads slim prompt (2K chars) + inlined context, outputs ONE JSON line. Python handles vault lookup, API calls, state updates.

### Kiefer's 4 directives (this session)
1. Make sales ASAP intelligently (high spenders get more attention)
2. Efficient chat queue — 60-90 second max response time
3. Clean out HEARTBEAT.md (done — now minimal health checks only)
4. "Money is king"

### Blocked
- Need direct Anthropic API key (`sk-ant-api03-...`) from console.anthropic.com to eliminate main session as middleman. Current OAuth key only works through OpenClaw.

### Token counts confirmed
- Canary #1: 12.2K (3K in/47 out)
- Canary #2: 12.3K (3K in/64 out)  
- Daemon spawn: 12.3K (3K in/61 out)

### Files
- `research/bianca-daemon.py` — main daemon
- `research/bianca-mass-bump.py` — hourly mass bumps
- `research/bianca-prompt-slim.md` — 2,090 char Opus prompt
- `research/bianca-execute-decision.py` — vault map + OF API + state
- `research/bianca-fan-state.json` — 98 fans tracked
- LaunchAgent: `com.plush.bianca-daemon.plist`

### HEARTBEAT.md updated
Cleaned out stale whale analysis data. Now contains only:
- Bianca daemon health check (curl localhost:8901/health + /stats)
- S4S rotation check (Railway + Vercel dashboard)
- Mass bump state file check
