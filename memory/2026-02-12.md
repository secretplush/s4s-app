# 2026-02-12

## S4S App — Hardcoded Removal & Vault Gap Scanner Fixes

### Vault Gap Scanner
- Fixed: was only checking `isActive` images, now checks ALL images for vault IDs (commit `224e25c7`)
- Added KV cross-referencing as fallback (commit `764cde0f`)
- Added dismiss button for false positives
- Added `?raw=1` param for client-side KV cross-ref
- **Known issue:** KV `vault_mappings` is empty — vault data only in browser IndexedDB, never synced to server

### Dynamic Models Refactor
- Kiefer adamant: NO hardcoded model lists, everything from OF API (49 models, not 30)
- `/api/vault-gaps/route.ts` updated to fetch from OF API dynamically
- `lib/models-data.ts` has `loadCachedModels()` helper
- Model detail page uses dynamic loading
- **BUT:** `/api/vault-gaps` still returning `totalModels: 30` — dynamic fetch may not be working
- Need full audit of all files still importing `CONNECTED_MODELS`

### Vercel Build Issues
- **Critical:** Vercel builds were failing silently — no commits since before `224e25c7` actually deployed
- `.next` build directory was tracked in git (202 files) — removed and added to `.gitignore` (commit `a1cee6de`)
- Earlier `git-filter-repo` cleanup of node_modules caused git state issues
- Need to confirm Vercel build succeeds after `.next` removal

### Git History
`224e25c7` → `2c85aa2e` → `764cde0f` → `7bed1052` → `cf8aa08b` → `a1cee6de`

### Next Steps
1. Confirm Vercel build works post `.next` cleanup
2. Verify gap scanner fixes are live (kybabyrae → nickyecker false positive)
3. Audit all hardcoded model references — dynamic refactor sub-agent may not have completed
4. Fix KV sync for vault_mappings
